{% extends "base.html" %}
{% block content %}
<article class="content" id="content-1">

{% if featured_events %}
  <content>
    <div class="container">
     <div class="row">
        <header>
          <h2><a href="#" title="Featured Events">Featured Events</a></h2>
        </header>
         {% for event in featured_events %}
         <a href="{{event["event_id"]}}">
           
         <div class="col-md-4 portfolio-item">
           <img class="img-responsive" src="http://placehold.it/780x420/ffffff/&text={{event.event_name +' ('+event.sport_name+')'}}" alt="">

         </div>
         </a>
         {% endfor %}
     </div>
   </div>
 </content>

 {% endif %}

 {% if all_events %}
 <content>
     <div class="container">
         <div class="row">
             <div class="col-md-12">
                 <header>
                     <h2><a href="#" title="Browse Events">Browse Events</a></h2>
                 </header>
             </div>
         </div>
         <div class="row">
                 <div class="btn-group" style="position:relative; margin: 0 0 40px -250px; top:50%; left: 50%;">
                     <button class="btn disabled" type="button" style="color: black;">Sort By: </button>
                     <button class="btn btn-primary" type="button" onclick="byEventAsc()">Event (Asc)</button>
                     <button class="btn btn-primary" type="button" onclick="byEventDesc()">Event (Desc)</button>
                     <button class="btn btn-primary" type="button" onclick="bySportAsc()">Sport (Asc)</button>
                     <button class="btn btn-primary" type="button" onclick="bySportDesc()">Sport (Desc)</button>
                 </div>
         </div>
         <script>
            function byEventAsc() {
                window.location.href="/events/sort-by-event-asc";
            }
            function byEventDesc() {
                window.location.href="/events/sort-by-event-desc";
            }
            function bySportAsc() {
                window.location.href="/events/sort-by-sport-asc";
            }
            function bySportDesc() {
                window.location.href="/events/sort-by-sport-desc";
            }
         </script>

         {% set order = False %}

         {% if sortBy == "by-event-asc" %}
             {% set sort_on = 'event_name' %}
         {% elif sortBy == "by-event-desc" %}
             {% set sort_on = 'event_name' %}
             {% set order = True %}
         {% elif sortBy == "by-sport-asc" %}
             {% set sort_on = 'sport_name' %}
         {% elif sortBy == "by-sport-desc" %}
             {% set sort_on = 'sport_name' %}
             {% set order = True %}
         {% else %}
             {% set sort_on = 'event_name' %}
         {% endif %}
         <div class="row">

             {% for event in all_events|sort(attribute=sort_on, reverse=order) %}
             <a href="{{event["event_id"]}}">
                 <!-- <a href="{{event[1]}}"> -->

                 <div class="col-md-3 portfolio-item">
                     <img class="img-responsive" src="http://placehold.it/580x320/ffffff/&text={{event.event_name+' ('+event.sport_name+')'}}" alt="">

                 </div>
             </a>
             {% endfor %}
         </div>
     </div>
     </content>

 {% else %}
 <content>
 <div class="results-container">
     <div class="title">
         <h2> {{ event_name }}</h2>
     </div>
     <div class="results">
         <h3 style="text-align: center;">Medalists</h3>
         <div class="container">
            <div class="row">
            
                {% for medal in medalists %}
                    <div class="list-group col-md-4 portfolio-item">
                        {% if medal.type == "Gold" %}
                            <img class="img-responsive" src="http://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Gold_medal.svg/300px-Gold_medal.svg.png" alt="" style="margin: 0 auto;">
                        {% endif %}
                        {% if medal.type == "Silver" %}
                            <img class="img-responsive" src="http://upload.wikimedia.org/wikipedia/commons/0/03/Silver_medal.svg" alt="" style="margin: 0 auto;">
                        {% endif %}
                        {% if medal.type == "Bronze" %}
                            <img class="img-responsive" src="http://upload.wikimedia.org/wikipedia/commons/5/52/Bronze_medal.svg" alt="" style="margin: 0 auto;">
                        {% endif %}
                        
                        {% set sort_on = request.args.sort_on|default('athlete_name') %}
                        {% for athlete in medal.athletes %}
                            <h4 style="text-align: center;"> {{ athlete.rank }} </h4>
                            <div class="card">
                            <a href="{{ url_for("athletes") }}{{ athlete.athlete_id }}" class="list-group-item">
                            <img class="img-responsive" src="{{ url_for('static', filename='../static/img/athletes/')}}{{athlete.athlete_name|replace(" ","_")}}.jpg" style="width: 100%">
                                Name:
                                    {{ athlete.athlete_name }}
                            </a>  
                            <a href="{{ url_for("countries") }}{{ athlete.country_id }}" class="list-group-item">
                                Country: 
                                    {{ athlete.country_name }}
                            </a>
                            <a href="{{ url_for("games") }}{{ athlete.olympic_id }}" class="list-group-item">
                                Year: 
                                    {{ athlete.olympic_year }}
                            </a>
                            </div> <!-- card -->
                        {% endfor %}
                    </div>
                {% endfor %}
            </div>
         </div>
     </div>
 </div>
 </content>
{% endif %}

</article>
{% endblock %}
